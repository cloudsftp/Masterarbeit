\section{The Adding Structures}

We start by plotting the periods of stable cycles in a one-dimensional scan across a period-adding structure.
\Cref{fig:minrep.adding1.motivation.halved.1d.period.full} shows this scan, while \Cref{fig:minrep.adding1.corner.period.full} shows the period-structure.
The period range on the one-dimensional scan is marked in red between the regions $P_{10}^4$ and $P_{10}^4 \oplus P_9^4$.
The regions $P_{10}^4$ and $P_9^4$ have cycles as we expect, $\Cycle{\A^6\B^4\C^6\D^4}$ and $\Cycle{\A^5\B^4\C^5\D^4}$.
But the region $P_{10}^4 \oplus P_9^4$ is weirder.
In this region, there are two coexisting cycles, that act like the coexisting cycles in ``type B'' parameter regions.
They are hybrids of the cycles $P_{10}^4$ and $P_9^4$, $\Cycle{\A^6\B^4\C^5\D^4}$ and $\Cycle{\A^5\B^4\C^6\D^4}$, acting like one cycle on the one half of the model and acting like the other cycles on the other half.
This is the first sign, that there is something off about this period-adding structure.

Examining the one-dimensional scan of the period-adding structure, \Cref{fig:minrep.adding1.motivation.halved.1d.period.full}, closer we find some inconsistencies.
First, the period of the cycle $\sigma\rho$, 58, is larger than the periods of $\sigma$, 20, and $\rho$, 19, combined.
This is unexpected because the cycle $\sigma\rho$ should be the cycles $\sigma$ and $\rho$ glued together, and therefore its period should be exactly the sum of the periods of the cycles $\sigma$ and $\rho$.
Similarly, the period of $\sigma^2\rho$ should be the sum of the periods of $\sigma$ and $\sigma\rho$.
But instead, the period of $\sigma^2\rho$ is smaller than the period of $\sigma\rho$.
Is this not a period-adding cascade after all?

What is happening here is that a period-adding structure in the halved model manifests as this weird structure in the full model.
This becomes apparent when simulating the halved model in the same period ranges.
\Cref{fig:minrep.adding1.motivation.halved.1d.period.halved} shows the one-dimensional period scan in the halved model that corresponds to the scan in the full model in \Cref{fig:minrep.adding1.motivation.halved.1d.period.full}.
In the halved model, $\sigma$ is the cycle $\Cycle{\L^6\R^4}$, which is expected for the cycle $P_{10}^4$, and $\rho$ is the cycle $\Cycle{\L^6\R^4\L^5\R^4}$.
The cycle $\sigma\rho$ in between the two is now actually the two cycles glued together $\Cycle{(\L^6\R^4)^2\L^5R^4}$, as we would expect in a period-adding structure.
And its period is 29, which is the sum of the periods of the cycle $\sigma$, 10, and $\rho$, 19.

Now we can also see that the unusual hybrid cycles $P_{10}^4 \oplus P_9^4$ in the full model are the manifestation of the cycle $\Cycle{L^6\R^4\L^5\R^4}$ in the halved model.
This cycle is itself the first level of the real period-adding structure of the cycles $P_{10}^4$ and $P_9^4$, which are $\Cycle{\L^6\R^4}$ and $\Cycle{L^5\R^4}$ in the halved model.
\Cref{fig:minrep.adding1.large.adding} shows a one-dimensional scan of a full period-adding structure in the halved model at different parameter values that allow for larger period regions with higher periods, making them visible to us.
In the next section, we will explain what exactly the halved model is, why it works in our case, and how to translate symbolic sequences between it and the full model.

\begin{figure}
	\centering
	\subfloat[The full model]{
		\includegraphics[width=.4 \textwidth]{62_MinimalRepr_Adding/2D_Period_1_Zoomed/result.png}
		\label{fig:minrep.adding1.corner.period.full}
	}
	\subfloat[The halved model]{
		\includegraphics[width=.4 \textwidth]{63_MinimalRepr_Adding_Halved/2D_Period_1_Zoomed/result.png}
		\label{fig:minrep.adding1.corner.period.halved}
	}
	\caption{
		2D period scans of period-adding regions of the same model in two different versions.
		On the left, is the full version of the model and on the right, is the halved version of the model.
		The red markers between the regions $P_{10}^4$ and $P_{10}^4 \oplus P_9^4$ in both pictures, is the parameter range used for the 1D scans in \Cref{fig:minrep.adding1.motivation.halved.1d.period}.
	}
	\label{fig:minrep.adding1.corner.period}
\end{figure}

\begin{figure}
	\centering
	\subfloat[The full model]{
		\includegraphics[width=.4 \textwidth]{62_MinimalRepr_Adding/1D_Period_1_add_hor_D1/result.png}
		\label{fig:minrep.adding1.motivation.halved.1d.period.full}
	}
	\subfloat[The halved model]{
		\includegraphics[width=.4 \textwidth]{63_MinimalRepr_Adding_Halved/1D_Period_1_add_hor_D1/result.png}
		\label{fig:minrep.adding1.motivation.halved.1d.period.halved}
	}
	\caption{
		1D period scans of a period-adding cascade of the same model in two different versions.
		On the left, is the full version of the model and on the right, is the halved version of the model.
		The parameter range is the same in both models and is marked red in \Cref{fig:minrep.adding1.corner.period}.
	}
	\label{fig:minrep.adding1.motivation.halved.1d.period}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=.7 \textwidth]{63_MinimalRepr_Adding_Halved/1D_Period_larger_adding/result.png}
	\caption{
		A 1D period scan of a horizontal adding structure at parameter values that allow us to see the adding more clearly.
		The fixed parameter values are $a_L = 1, b_L = 0.8, p_x = -0.39$ and $p_y$ is in the range $[0.082, 0.087]$.
		The cycles involved in the adding are $P_7^3$ and $P_7^2$.
	}
	\label{fig:minrep.adding1.large.adding}
\end{figure}


%In the full model: $\sigma = \A^6\B^4\C^6\D^4$ (Period 20) and $\rho = \{\A^6\B^4\C^5\D^4, \A^5\B^4\C^6\D^4\}$ (Period 19).
%If we glue the cycles together, we would expect $\sigma\rho = \{\A^6\B^4\C^6\D^4\A^6\B^4\C^5\D^4, \A^6\B^4\C^6\D^4A^5\B^4\C^6\D^4\}$ (Period 39).
%But when we simulate the full model at this point, we get only one cycle $\sigma\rho = \A^5\B^4\C^6\D^4\A^6\B^4\C^5\D^4\A^6\B^4\C^6\D^4$ with period 58.
%
%Explanation: What is actually happening is that the cycles $\sigma = \L^6\R^4$ (Period 10) and $\rho = \L^6\R^4\L^5\R^4$ (Period 19) of the halved model get glued together.
%In the full model, they manifest as the cycles $\sigma$ and $\rho$ described in the last section.
%The resulting cycle is $(\L^6\R^4)^2\L^5\R^4 \equiv \L^6\R^4\L^6\R^4\L^5\R^4$
%This cycle manifests as $\sigma\rho = \A^5\B^4\C^6\D^4\A^6\B^4\C^5\D^4\A^6\B^4\C^6\D^4$ in the full model.
%
%Therefore, the cycle $\rho \equiv \L^6R^4\L^5\R^4$ itself is the two cycles $\sigma \equiv \L^6\R^4$ and $\rho' \equiv \L^5\R^4$ glued together.
%\Cref{fig:tree.adding1.hor.halved} shows the farey tree of this adding cascade of $\sigma$ and $\rho'$ in the halved model up to level 4.
%\Cref{fig:tree.adding1.hor.full} shows the farey tree of the same adding cascade, but this time the symbolic sequences are in the full model.
%The adding is not apparent at all, since the cycles do not get glued together in the full model.
%How to translate cycles between the different model flavors is discussed in the following.
%
%\subsubsection{Translating Cycles}
%
%We can get the manifestation of a cycle from the halved system in the full system by ``unrolling'' the cycle.
%For this, we write down the cycle of the halved model three times in a row.
%For our cycle $\sigma\rho$ this would be $\L^6\R^4\L^6\R^4\L^5\R^4|\L^6\R^4\L^6\R^4\L^5\R^4|\L^6\R^4\L^6\R^4\L^5\R^4$.
%Then we make pairs on rotations until the next pair would start at the same point, the first pair started in the original cycle.
%This step has to be repeated with every rotation of the original cycle as the starting position once.
%For the first iteration, we start with the first rotation.
%In our example, we would get the pairs $\L^6\R^4\L^6\R^4$, $\L^5\R^4\L^6\R^5$, and $\L^6\R^4\L^5\R^4$.
%Here we stop, because the next pair would start at the beginning of the original cycle in the halved model.
%For each pair, we replace the first $\L$ by $\A$, the first $\R$ by $\B$, the second $\L$ by $\C$, and the second $\R$ by $\D$ and put them toghether again.
%In our example, we get $\A^6\B^4\C^6\D^4\A^5\B^4\C^6\D^4\A^6\B^4\C^5\D^4$, which is exactly what we got in the simulation.
%
%For the second iteration, we would get the pairs $\L^6\R^4\L^5\R^4$, $\L^6\R^4\L^6\R^4$, and $\L^5\R^4\L^6\R^4$.
%This results in $\A^6\B^4\C^5\D^4\A^6\B^4\C^6\D^4\A^5\B^4\C^6\D^4$, which is equivalent to the result of the last paragraph by rotating it one complete rotation in the full model.
%The third iteration also produces the same cycle rotated one time and is omitted here.
%
%\todo{only one offset necessary}
%
%The inverse, ``rolling'' is easier.
%We just write down the cycle in the full model, for example, $\A^6\B^4\C^6\D^4$.
%Then we replace $\A$ and $\C$ by $\L$, and $\B$ and $\D$ by $\R$.
%In our example, we get $\L^6\R^4\L^6\R^4$.
%Last, we need to remove redundancy.
%In our example, the cycle repeats itself twice, so we remove one half and get the result $\L^6\R^4$.
%
%\subsubsection{$\sigma^2\rho$}
%
%Now equipped with this tool, we can try to explain the cycle at $\sigma^2\rho$.
%In both trees, \Cref{fig:tree.adding1.hor.halved,fig:tree.adding1.hor.full}, the node for this cycle is the lowest node on level 3.
%The cycle in the halved model is $(\L^6\R^4)^3\L^5\R^4$ as expected of period adding.
%In the full model, this cycle manifests as two coexisting cycles, $\A^6\B^4\C^6\D^4\A^6\B^4\C^5\D^4$ and $\A^6\B^4\C^6\D^4\A^6\B^4\C^5\D^4$.
%These are exactly the cycles we get when simulating the full model at this point.

\begin{figure}
	\centering
	\includegraphics[width=\textwidth]{FareyTrees/Minrep_Adding1_Halved/adding.png}
	\caption{t}
	\label{fig:tree.adding1.hor.halved}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=\textwidth]{FareyTrees/Minrep_Adding1_Full/adding.png}
	\caption{t}
	\label{fig:tree.adding1.hor.full}
\end{figure}

\subsection{The Halved Model}

The idea behind the halved model is that the model we have can be looked at in a different way than it was introduced in.
We know the model maps an input $x$ to $f(x) \mod 1$, meaning that if the output $f(x)$ is greater or equal to 1, we subtract 1 from it until it is in the range $[0, 1)$.
Similarly, we add 1 to it if it is smaller than 0 until it is in the desired range.
Now instead of confining the model to the domain of $[0, 1)$, we think of it repeating infinitely in both directions.
We can achieve this by mapping $x$ to $f(x - \lfloor x \rfloor)$.
This trick maps the input $x$ into the domain, on which our model function produces sensible results and causes it to repeat infinitely.
\Cref{fig:minrep.infinite.model.concept} illustrates this concept for the cycle $P_7^3$.
The blue square is the full model.
One can see, that the branch $f_\D$ is outside the blue square at its right edge.
This is because it was cut off and continued at the bottom of the square before, due to the $\mod 1$ operation.

\todo{this makes sense in the original problem domain}

In this model, there are no cycles that have multiple rotations.
Instead, the cycles that had multiple rotations in the full model, manifest as a sequence of different blocks of the full model.
Meaning for the example $P_7^3$, the same blocks of $\A^4\B^3\C^4\D^3$ are repeating infinitely.
But for an example with multiple rotations, such as $\A\B\C\D\A^2\B^2\C^2\D^2$, the blocks will not all be the same.
Instead, the blocks $\A\B\C\D$ and $\A^2\B^2\C^2\D^2$ will be alternating.

Now the symmetry of our function $f$ comes into play.
Since $f(x + 0.5) = f(x) + 0.5$ for $x \in [0, 0.5)$, we can split the infinite model into smaller blocks than the blue block of the full model.
The function of the infinite model repeats in blocks of size 0.5, these blocks are marked red in \Cref{fig:minrep.infinite.model.concept}.
These red blocks represent the halved model, it is the smallest repeating part of the infinite model.
To get the cycle in the halved model, we look at the pattern in which different red blocks repeat along the infinite model.
For our example in the picture, there is only one red block that repeats infinitely, $\L^4\R^3$.
The next section will explain, how to translate cycles between the halved and full model.

\begin{figure}
	\centering
	\includegraphics[width=.7 \textwidth]{63_MinimalRepr_Adding_Halved/Cob_Vis_s/Manual/result.png}
	\caption{Illustration of the infinite model concept.}
	\label{fig:minrep.infinite.model.concept}
\end{figure}

\input{Sections/70_Adding/15_1_translating.tex}
\input{Sections/70_Adding/15_2_properties_add_full.tex}
\input{Sections/70_Adding/15_3_rotation_numbers_full.tex}